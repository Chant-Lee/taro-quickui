"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function generate(e){""===e&&(e="HelloWorld"),promptName(e,_chalk2.default.green("Init your Project"),function(e,t){if(!e){var a=t.name;createProject(a,_path2.default.join(process.cwd(),a))}})}function promptName(e,t,a){var r={properties:{name:{message:t,default:e}}};_prompt2.default.start(),_prompt2.default.get(r,a)}function createProject(e,t){if(_fsExtra2.default.existsSync(t))return console.log(_chalk2.default.red('the folder "'+t+'" exists! Please rename your project.'));if(!(0,_utils.mkdirsSync)(t))return console.lot(_chalk2.default.red('the folder "'+t+'" create failed!.'));var a=_path2.default.join(__dirname,"..","templates","app/demo");copyFiles(t,a),replaceFiles({appName:e},["src/manifest.json","package.json"].map(function(e){return _path2.default.join(t,e)}))}function copyFiles(e,t){var a=[];(0,_utils.traverseDirSync)(t,a),a.forEach(function(a){var r=_path2.default.relative(t,a),l=_path2.default.join(e,r).replace("modules","node_modules");_fsExtra2.default.existsSync(l)?console.log(_chalk2.default.yellow("file: "+l+" already existed.")):(console.log(_chalk2.default.white("file: "+l+" created.")),_fsExtra2.default.copySync(a,l))})}function replaceFiles(names,files){files.forEach(function(file){var content=_fsExtra2.default.readFileSync(file,{encoding:"utf-8"});Object.keys(names).forEach(function(n){content=content.replace(eval("/{{"+n+"}}/g"),function(e){return names[n]||e})}),_fsExtra2.default.writeFileSync(file,content)})}var _path=require("path"),_path2=_interopRequireDefault(_path),_fsExtra=require("fs-extra"),_fsExtra2=_interopRequireDefault(_fsExtra),_prompt=require("prompt"),_prompt2=_interopRequireDefault(_prompt),_chalk=require("chalk"),_chalk2=_interopRequireDefault(_chalk),_utils=require("./utils");module.exports=generate;