"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createSocketServer(e,o){var r=(0,_socket2.default)(e);o.context.io=r,r.on("connection",function(e){r.on("error",function(e){_utils.colorconsole.error("### App Socket Server ### websocket server发生错误: "+e.message)}),_utils.colorconsole.info("### App Socket Server ### websocket用户("+(0,_utils.stripPrefixForIPV4MappedIPV6Address)(e.conn.remoteAddress)+")连入到websocket server"),e.on("disconnect",function(){_utils.colorconsole.info("### App Socket Server ### websocket client与websocket server断开"),r.emit("user disconnected")})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSocketServer=createSocketServer;var _socket=require("socket.io"),_socket2=_interopRequireDefault(_socket),_utils=require("./lib/utils");